<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../js/css/bootstrap.min.css"></link>
    <link rel="stylesheet" href="../js/css/style.css"></link>
    <script src="../js/d3.min.js"></script>
</head>

<body class='body'>
    <div class="container">
        <div class="row" id="form-container">
            <div class="form-title">
                <span>Utility Sewa</span>
            </div>
            <div class="col-6">
                <form id="form-body">
                    <div class="error-message" style="margin-bottom: 20px;">
                    </div>
                    <div class="form-group">
                        <label for="email">Email address</label>
                        <input type="email" class="form-control" id="email" aria-describedby="emailHelp"
                            placeholder="Enter email">
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" class="form-control" id="password" placeholder="Password">
                    </div>
                    <div class="form-group form-check">
                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                        <label class="form-check-label" for="exampleCheck1">Remember Me</label>
                    </div>
                    <div class="form-button">
                        <button id="form-button" class="btn btn-primary">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        var email = document.getElementById('email');
        var password = document.getElementById('password');
        var submitButton = document.getElementById('form-button');
        var errorDiv = document.querySelector('.error-message');

        submitButton.addEventListener('click', handleFormSubmission);
        email.addEventListener('focus', handleFieldFocus);
        password.addEventListener('focus', handleFieldFocus);

        function handleFormSubmission(e){
            e.preventDefault();
            if(validateUserDetails()){
                var url = window.location.href.replace('login','user');
                var queryString = `name=${btoa('Subarsh')}`;
                var newURL = new URL(url);
                newURL.search = queryString;
                window.location.href = newURL.toString();
            }
        }

        function handleFieldFocus(e){
            errorDiv.style.display = 'none';
            e.target.style.borderLeft = '8px solid gray';
        }

        function validateUserDetails(){
            if(!email.value && !password.value){
                errorDiv.innerHTML = 'Required Fields are missing'
                errorDiv.style.display = 'block';
                email.style.borderLeft = '8px solid red';
                password.style.borderLeft = '8px solid red';
                return false;
            }

            if(!email.value){
                errorDiv.innerHTML = 'Email Field is missing'
                errorDiv.style.display = 'block';
                email.style.borderLeft = '8px solid red';
                return false;
            }else if(!password.value){
                errorDiv.innerHTML = 'Password is Missing';                
                errorDiv.style.display = 'block';
                password.style.borderLeft = '8px solid red';
                return false;
            }
            return true;
        }

    </script>
</body>

</html>